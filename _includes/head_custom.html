<link rel="preconnect" href="https://fonts.googleapis.com" />

<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

<link
    href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300..700&family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&display=swap"
    rel="stylesheet"
/>

<script src="https://unpkg.com/lucide@latest"></script>

<script>
    (() => {
        const savedTheme = localStorage.getItem("theme");
        const prefersDark = window.matchMedia(
            "(prefers-color-scheme: dark)",
        ).matches;
        const theme = savedTheme || (prefersDark ? "dark" : "light");

        document.documentElement.setAttribute("data-theme", theme);
        console.log("Initial theme:", theme);
    })();

    function toggleTheme() {
        const html = document.documentElement;
        const currentTheme = html.getAttribute("data-theme");
        const newTheme = currentTheme === "dark" ? "light" : "dark";

        html.setAttribute("data-theme", newTheme);
        localStorage.setItem("theme", newTheme);

        window.dispatchEvent(new CustomEvent("jtd:theme-changed"));

        console.log("Theme changed to:", newTheme);
    }

    document.addEventListener("DOMContentLoaded", function () {
        lucide.createIcons();
    });
</script>

{% if layout.enable_playground %}
<script
    type="module"
    crossorigin
    src="https://cdn.jsdelivr.net/npm/web-tree-sitter@0.25.10/tree-sitter.js"
></script>
<script
    type="module"
    crossorigin
    src="https://cdn.jsdelivr.net/npm/monaco-editor@0.54.0/+esm"
></script>
<script
    type="module"
    crossorigin
    src="/playground/wasm/playground_worker.js"
></script>
<script
    type="module"
    crossorigin
    src="/playground/assets/main-DnnnS2ME.js"
></script>
{% endif %}
