<script src="https://unpkg.com/lucide@latest"></script>
<script>
    if (
        localStorage.theme === "dark" ||
        (!("theme" in localStorage) &&
            window.matchMedia("(prefers-color-scheme: dark)").matches)
    ) {
        document.documentElement.setAttribute("data-theme", "dark");
        jtd.setTheme("dark");
    } else {
        document.documentElement.setAttribute("data-theme", "light");
        jtd.setTheme("light");
    }

    function setTheme(theme) {
        var cssFile = document.querySelector('[rel="stylesheet"]');
        cssFile.setAttribute(
            "href",
            "/assets/css/just-the-docs-" + theme + ".css",
        );
        cssFile.addEventListener(
            "load",
            () => {
                window.dispatchEvent(new CustomEvent("jtd:theme-changed"));
            },
            { once: true },
        );
    }

    function toggleTheme() {
        const html = document.documentElement;
        if (html.getAttribute("data-theme") === "dark") {
            html.setAttribute("data-theme", "light");
            localStorage.theme = "light";
            setTheme("light");
        } else {
            html.setAttribute("data-theme", "dark");
            localStorage.theme = "dark";
            setTheme("dark");
        }
    }

    document.addEventListener("DOMContentLoaded", function () {
        lucide.createIcons();
    });
</script>
